swagger: '2.0'
info:
  description: >-
    シネマサンシャインAPI
  version: 9.0.0
  title: sskts-api-mock
  termsOfService: ''
  contact:
    email: yamazaki@motionpicture.jp
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
host: sskts-api-development-mock.azurewebsites.net
basePath: /
tags:
  - name: performance
    description: パフォーマンスリソースの操作
  - name: film
    description: 作品リソースの操作
  - name: screen
    description: スクリーンリソースの操作
  - name: theater
    description: 劇場リソースの操作
  - name: transaction
    description: 取引リソースの操作
  - name: owner
    description: 会員リソースの操作
schemes:
  - http
  - https
paths:
  /performances:
    get:
      tags:
        - performance
      summary: パフォーマンス検索
      description: ''
      operationId: searchPerformances
      produces:
        - application/json
      responses:
        '200':
          description: ok
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  type: object
        '400':
          $ref: '#/responses/BadRequest'
      security:
        - oauth_implicit:
            - performances
            - performances.read-only
  /performances/{performanceId}:
    get:
      tags:
        - performance
      summary: Find performance by ID
      description: Returns a single performance
      operationId: findPerformanceById
      produces:
        - application/json
      parameters:
        - name: performanceId
          in: path
          description: パフォーマンスID
          required: true
          type: string
      responses:
        '200':
          $ref: '#/responses/OK'
        '400':
          $ref: '#/responses/BadRequest'
        '404':
          $ref: '#/responses/NotFound'
      security:
        - api_key: []
  /films/{filmId}:
    get:
      tags:
        - film
      summary: 作品取得
      operationId: findFilmById
      produces:
        - application/json
      parameters:
        - name: filmId
          in: path
          description: ID
          required: true
          type: string
      responses:
        '200':
          $ref: '#/responses/OK'
        '400':
          $ref: '#/responses/BadRequest'
        '404':
          $ref: '#/responses/NotFound'
  /screens/{screenId}:
    get:
      tags:
        - screen
      summary: スクリーン取得
      operationId: findScreenById
      produces:
        - application/json
      parameters:
        - name: screenId
          in: path
          description: ID
          required: true
          type: string
      responses:
        '200':
          $ref: '#/responses/OK'
        '400':
          $ref: '#/responses/BadRequest'
        '404':
          $ref: '#/responses/NotFound'
  /theaters:
    get:
      tags:
        - theater
      summary: 劇場検索
      operationId: findTheatersById
      produces:
        - application/json
      responses:
        '200':
          $ref: '#/responses/OK'
        '400':
          $ref: '#/responses/BadRequest'
  /theaters/{theaterId}:
    get:
      tags:
        - theater
      summary: 劇場取得
      operationId: findTheaterById
      produces:
        - application/json
      parameters:
        - name: theaterId
          in: path
          description: ID
          required: true
          type: string
      responses:
        '200':
          $ref: '#/responses/OK'
        '400':
          $ref: '#/responses/BadRequest'
        '404':
          $ref: '#/responses/NotFound'
  /owners/me/profile:
    get:
      tags:
        - owner
      summary: 会員プロフィール取得
      operationId: findMyProfile
      produces:
        - application/json
      responses:
        '200':
          description: 'ok'
          schema:
            type: object
            properties:
              data:
                $ref: '#/definitions/OwnerProfile'
        '400':
          $ref: '#/responses/BadRequest'
        '404':
          $ref: '#/responses/NotFound'
    put:
      tags:
        - owner
      summary: 会員プロフィール更新
      operationId: updateMyProfile
      produces:
        - application/json
      parameters:
        - name: data
          in: body
          description: ID
          required: true
          schema:
            $ref: '#/definitions/OwnerProfile'
      responses:
        '204':
          $ref: '#/responses/NoContent'
        '400':
          $ref: '#/responses/BadRequest'
  /owners/me/cards:
    get:
      tags:
        - owner
      summary: 会員カード検索
      operationId: findMyCards
      produces:
        - application/json
      responses:
        '200':
          description: 'ok'
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/definitions/Card'
        '400':
          $ref: '#/responses/BadRequest'
    post:
      tags:
        - owner
      summary: 会員カード追加
      operationId: createMyCard
      produces:
        - application/json
      parameters:
        - name: data
          in: body
          description: ID
          required: true
          schema:
            $ref: '#/definitions/UnsavedCard'
      responses:
        '201':
          description: ok
          schema:
            type: object
            properties:
              data:
                $ref: '#/definitions/Card'
        '400':
          $ref: '#/responses/BadRequest'
  /owners/me/cards/{cardId}:
    delete:
      tags:
        - owner
      summary: 会員カード削除
      operationId: deleteMyCard
      produces:
        - application/json
      parameters:
        - name: cardId
          in: path
          description: ID
          required: true
          type: string
      responses:
        '204':
          $ref: '#/responses/NoContent'
        '400':
          $ref: '#/responses/BadRequest'
  /owners/me/assets/seatReservation:
    get:
      tags:
        - owner
      summary: 会員座席予約資産検索
      operationId: findMySeatReservationAssets
      produces:
        - application/json
      responses:
        '200':
          description: ok
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/definitions/SeatReservationAsset'
        '400':
          $ref: '#/responses/BadRequest'
  /transactions/startIfPossible:
    post:
      tags:
        - transaction
      summary: 取引開始
      operationId: startTransaction
      produces:
        - application/json
      parameters:
        - name: data
          in: body
          required: true
          schema:
            type: object
            properties:
              expires_at:
                description: 取引期限
                type: string
                example: ''
      responses:
        '200':
          description: ok
          schema:
            type: object
            properties:
              data:
                $ref: '#/definitions/Transaction'
        '400':
          $ref: '#/responses/BadRequest'
        '404':
          $ref: '#/responses/NotFound'
  /transactions/makeInquiry:
    post:
      tags:
        - transaction
      summary: 取引照会
      operationId: makeInquiryOfTransaction
      produces:
        - application/json
      parameters:
        - name: data
          in: body
          description: 照会キー
          required: true
          schema:
            $ref: '#/definitions/TransactionInquiryKey'
      responses:
        '200':
          description: ok
          schema:
            type: object
            properties:
              data:
                $ref: '#/definitions/Transaction'
        '400':
          $ref: '#/responses/BadRequest'
        '404':
          $ref: '#/responses/NotFound'
  /transactions/{transactionId}/anonymousOwner:
    patch:
      tags:
        - transaction
      summary: 取引中匿名所有者更新
      operationId: updateAnonymousOwner
      produces:
        - application/json
      parameters:
        - name: transactionId
          in: path
          description: ID
          required: true
          type: string
        - name: data
          in: body
          description: プロフィール
          required: true
          schema:
            type: object
            properties:
              name_first:
                type: string
                example: ''
              name_last:
                type: string
                example: ''
              email:
                type: string
                example: ''
              tel:
                type: string
                example: ''  
      responses:
        '204':
          $ref: '#/responses/NoContent'
        '400':
          $ref: '#/responses/BadRequest'
  /transactions/{transactionId}/owners/{ownerId}:
    put:
      tags:
        - transaction
      summary: 取引中所有者更新
      operationId: updateOwnerInTransaction
      produces:
        - application/json
      parameters:
        - name: transactionId
          in: path
          description: 取引ID
          required: true
          type: string
        - name: ownerId
          in: path
          description: 所有者ID
          required: true
          type: string
        - name: data
          in: body
          description: プロフィール
          required: true
          schema:
            type: object
            properties:
              data:
               type: object
               properties:
                type:
                  type: string
                  example: 'owners'
                id:
                  type: string
                  example: ''
                attributes:
                  type: object
                  properties:
                    name_first:
                      type: string
                      example: ''
                    name_last:
                      type: string
                      example: ''
                    email:
                      type: string
                      example: ''
                    tel:
                      type: string
                      example: ''
                    group:
                      type: string
                      example: ''
                      enum:
                        - "ANONYMOUS"
                        - "MEMBER"
                    username:
                      type: string
                      example: ''
                    password:
                      type: string
                      example: ''
      responses:
        '200':
          description: 'ok'
          schema:
            type: object
            properties:
              data:
                $ref: '#/definitions/OwnerProfile'
        '400':
          $ref: '#/responses/BadRequest'
  /transactions/{transactionId}/owners/:ownerId/cards:
    post:
      tags:
        - transaction
      summary: 取引中所有者カード追加
      operationId: createCardOfOwnerInTransaction
      produces:
        - application/json
      parameters:
        - name: transactionId
          in: path
          description: ID
          required: true
          type: string
        - name: data
          in: body
          description: カード情報
          required: true
          schema:
            $ref: '#/definitions/UnsavedCard'
      responses:
        '201':
          description: ok
          schema:
            type: object
            properties:
              data:
                $ref: '#/definitions/Card'
        '400':
          $ref: '#/responses/BadRequest'
  /transactions/{transactionId}/authorizations/gmo:
    post:
      tags:
        - transaction
      summary: GMO承認追加
      operationId: createGMOAuthorization
      produces:
        - application/json
      parameters:
        - name: transactionId
          in: path
          description: 取引ID
          required: true
          type: string
        - name: data
          in: body
          description: GMOオーソリデータ
          required: true
          schema:
            type: object
            properties:
              owner_from:
                type: string
                example: ''
              owner_to:
                type: string
                example: ''
              gmo_shop_id:
                type: string
                example: ''
              gmo_shop_pass:
                type: string
                example: ''
              gmo_order_id:
                type: string
                example: ''
              gmo_amount:
                type: string
                example: ''
              gmo_access_id:
                type: string
                example: ''
              gmo_access_pass:
                type: string
                example: ''
              gmo_job_cd:
                type: string
                example: ''
              gmo_pay_type:
                type: string
                example: ''
      responses:
        '200':
          description: ok
          schema:
            type: object
            properties:
              data:
                type: object
                properties:
                    type:
                      type: string
                      example: 'authorizations'
                    id:
                      type: string
                      example: ''
        '400':
          $ref: '#/responses/BadRequest'
  /transactions/{transactionId}/authorizations/coaSeatReservation:
    post:
      tags:
        - transaction
      summary: 座席予約承認追加
      operationId: createSeatReservationAuthorization
      produces:
        - application/json
      parameters:
        - name: transactionId
          in: path
          description: 取引ID
          required: true
          type: string
        - name: data
          in: body
          description: COA仮予約データ
          required: true
          schema:
            type: object
            properties:
              owner_from:
                type: string
                example: ''
              owner_to:
                type: string
                example: ''
              coa_tmp_reserve_num:
                type: integer
                example: ''
              coa_theater_code:
                type: string
                example: ''
              coa_date_jouei:
                type: string
                example: ''
              coa_title_code:
                type: string
                example: ''
              coa_title_branch_num:
                type: string
                example: ''
              coa_time_begin:
                type: string
                example: ''
              coa_screen_code:
                type: string
                example: ''
              seats:
                type: array
                items:
                  type: object
                  properties:
                    performance:
                      type: string
                      example: ''
                    screen_section:
                      type: string
                      example: ''
                    seat_code:
                      type: string
                      example: ''
                    ticket_code:
                      type: string
                      example: ''
                    ticket_name:
                      $ref: '#/definitions/MultilingualString'
                    ticket_name_kana:
                      type: string
                      example: ''
                    std_price:
                      type: integer
                      example: ''
                    add_price:
                      type: integer
                      example: ''
                    dis_price:
                      type: integer
                      example: ''
                    sale_price:
                      type: integer
                      example: ''
                    mvtk_app_price:
                      type: integer
                      example: ''
                    add_glasses:
                      type: integer
                      example: ''
                    kbn_eisyahousiki:
                      type: string
                      example: ''
                    mvtk_num:
                      type: string
                      example: ''
                    mvtk_kbn_denshiken:
                      type: string
                      example: ''
                    mvtk_kbn_maeuriken:
                      type: string
                      example: ''
                    mvtk_kbn_kensyu:
                      type: string
                      example: ''
                    mvtk_sales_price:
                      type: integer
                      example: ''
              price:
                type: integer
                example: ''
      responses:
        '200':
          description: ok
          schema:
            type: object
            properties:
              data:
                type: object
                properties:
                    type:
                      type: string
                      example: 'authorizations'
                    id:
                      type: string
                      example: ''
        '400':
          $ref: '#/responses/BadRequest'
  /transactions/{transactionId}/authorizations/mvtk:
    post:
      tags:
        - transaction
      summary: ムビチケ承認追加
      operationId: createMvtkAuthorization
      produces:
        - application/json
      parameters:
        - name: transactionId
          in: path
          description: 取引ID
          required: true
          type: string
        - name: data
          in: body
          description: ムビチケ着券データ
          required: true
          schema:
            type: object
            properties:
              owner_from:
                type: string
                example: ''
              owner_to:
                type: string
                example: ''
              price:
                type: integer
                example: ''
              kgygish_cd:
                type: string
                example: ''
              yyk_dvc_typ:
                type: string
                example: ''
              trksh_flg:
                type: string
                example: ''
              kgygish_sstm_zskyyk_no:
                type: string
                example: ''
              kgygish_usr_zskyyk_no:
                type: string
                example: ''
              jei_dt:
                type: string
                example: ''
              kij_ymd:
                type: string
                example: ''
              st_cd:
                type: string
                example: ''
              scren_cd:
                type: string
                example: ''
              knyknr_no_info:
                type: array
                items:
                  type: object
                  properties:
                    knyknr_no:
                      type: string
                      example: ''
                    pin_cd:
                      type: string
                      example: ''
                    knsh_info:
                      type: array
                      items:
                        type: object
                        properties:
                          knsh_typ:
                            type: string
                            example: ''
                          mi_num:
                            type: string
                            example: ''
              zsk_info:
                type: array
                items:
                  type: object
                  properties:
                    zsk_cd:
                      type: string
                      example: ''
              skhn_cd:
                type: string
                example: ''
      responses:
        '200':
          description: ok
          schema:
            type: object
            properties:
              data:
                type: object
                properties:
                    type:
                      type: string
                      example: 'authorizations'
                    id:
                      type: string
                      example: ''
        '400':
          $ref: '#/responses/BadRequest'
  /transactions/{transactionId}/authorizations/{authorizationId}:
    delete:
      tags:
        - transaction
      summary: 承認解除
      operationId: deleteAuthorization
      produces:
        - application/json
      parameters:
        - name: transactionId
          in: path
          description: 取引ID
          required: true
          type: string
        - name: authorizationId
          in: path
          description: 承認ID
          required: true
          type: string
      responses:
        '204':
          $ref: '#/responses/NoContent'
        '400':
          $ref: '#/responses/BadRequest'
  /transactions/{transactionId}/enableInquiry:
    patch:
      tags:
        - transaction
      summary: 取引照会キー作成
      operationId: enableInquiryOfTransaction
      produces:
        - application/json
      parameters:
        - name: transactionId
          in: path
          description: 取引ID
          required: true
          type: string
        - name: data
          in: body
          description: 取引照会キー
          required: true
          schema:
            $ref: '#/definitions/TransactionInquiryKey'
      responses:
        '204':
          $ref: '#/responses/NoContent'
        '400':
          $ref: '#/responses/BadRequest'
  /transactions/{transactionId}/notifications/email:
    post:
      tags:
        - transaction
      summary: 取引通知作成
      operationId: createEmailNotification
      produces:
        - application/json
      parameters:
        - name: transactionId
          in: path
          description: 取引ID
          required: true
          type: string
        - name: data
          in: body
          description: メール通知データ
          required: true
          schema:
            type: object
            properties:
              from:
                type: string
                example: ''
              to:
                type: string
                example: ''
              subject:
                type: string
                example: ''
              content:
                type: string
                example: ''
      responses:
        '200':
          description: ok
          schema:
            type: object
            properties:
              data:
                type: object
                properties:
                    type:
                      type: string
                      example: 'notifications'
                    id:
                      type: string
                      example: ''
        '400':
          $ref: '#/responses/BadRequest'
  /transactions/{transactionId}/notifications/{notificationId}:
    delete:
      tags:
        - transaction
      summary: 取引通知削除
      operationId: deleteNotification
      produces:
        - application/json
      parameters:
        - name: transactionId
          in: path
          description: 取引ID
          required: true
          type: string
        - name: notificationId
          in: path
          description: 通知ID
          required: true
          type: string
      responses:
        '204':
          $ref: '#/responses/NoContent'
        '400':
          $ref: '#/responses/BadRequest'
  /transactions/{transactionId}/close:
    patch:
      tags:
        - transaction
      summary: 取引成立
      operationId: closeTransaction
      produces:
        - application/json
      parameters:
        - name: transactionId
          in: path
          description: 取引ID
          required: true
          type: string
      responses:
        '204':
          $ref: '#/responses/NoContent'
        '400':
          $ref: '#/responses/BadRequest'
securityDefinitions:
  oauth_password:
    type: oauth2
    tokenUrl: 'https://sskts-api-development-mock.azurewebsites.net/oauth/token'
    flow: password
    scopes:
      performances: パフォーマンス更新
      performances.read-only: パフォーマンス読み込み
  oauth_implicit:
    type: oauth2
    authorizationUrl: 'https://sskts-api-development-mock.azurewebsites.net/oauth/token'
    flow: implicit
    scopes:
      performances: パフォーマンス更新
      performances.read-only: パフォーマンス読み込み
  api_key:
    type: apiKey
    name: api_key
    in: header
definitions:
  OwnerProfile:
    type: object
    properties:
      type:
        type: string
        example: owners
      id:
        type: string
      attributes:
        type: object
        properties:
          name_first:
            type: string
            example: ''
          name_last:
            type: string
            example: ''
          email:
            type: string
            example: ''
          tel:
            type: string
            example: ''
  UnsavedCard:
    type: object
    properties:
      data:
        type: object
        properties:
          type:
            type: string
            example: cards
          attributes:
            type: object
            properties:
              card_no:
                type: string
              card_pass:
                type: string
              expire:
                type: string
              holder_name:
                type: string
              token:
                type: string
  Card:
    type: object
    properties:
      type:
        type: string
        example: cards
      id:
        type: string
        example: ''
      attributes:
        type: object
        properties:
          card_seq:
            type: string
            example: ''
          card_name:
            type: string
            example: ''
          card_no:
            type: string
            example: ''
          expire:
            type: string
            example: ''
          holder_name:
            type: string
            example: ''
  MultilingualString:
    type: object
    properties:
      en:
       type: string
      ja:
       type: string
  SeatReservationAsset:
    type: object
    properties:
      type:
        type: string
        example: assets
      id:
        type: string
        example: ''
      attributes:
        type: object
        properties:
          performance:
            type: string
            example: ''
          screen_section:
            type: string
            example: ''
          seat_code:
            type: string
            example: ''
          ticket_code:
            type: string
            example: ''
          ticket_name:
            $ref: '#/definitions/MultilingualString'
          ticket_name_kana:
            type: string
            example: ''
          std_price:
            type: integer
            format: int64
            example: ''
          add_price:
            type: integer
            format: int64
            example: ''
          dis_price:
            type: integer
            format: int64
            example: ''
          sale_price:
            type: integer
            format: int64
            example: ''
          add_glasses:
            type: integer
            format: int64
            example: ''
          mvtk_app_price:
            type: integer
            format: int64
            example: ''
          kbn_eisyahousiki:
            type: string
            example: ''
          mvtk_num:
            type: string
            example: ''
          mvtk_kbn_denshiken:
            type: string
            example: ''
          mvtk_kbn_maeuriken:
            type: string
            example: ''
          mvtk_kbn_kensyu:
            type: string
            example: ''
          mvtk_sales_price:
            type: integer
            format: int64
            example: ''
          theater:
            type: string
            example: ''
          screen:
            type: string
            example: ''
          film:
            type: string
            example: ''
          performance_day:
            type: string
            example: ''
          performance_time_start:
            type: string
            example: ''
          performance_time_end:
            type: string
            example: ''
          theater_name:
            $ref: '#/definitions/MultilingualString'
          theater_name_kana:
            type: string
            example: ''
          theater_address:
            $ref: '#/definitions/MultilingualString'
          screen_name:
            $ref: '#/definitions/MultilingualString'
          film_name:
            $ref: '#/definitions/MultilingualString'
          film_name_kana:
            type: string
            example: ''
          film_name_short:
            type: string
            example: ''
          film_name_original:
            type: string
            example: ''
          film_minutes:
            type: integer
            format: int64
            example: ''
          film_kbn_eirin:
            type: string
            example: ''
          film_kbn_eizou:
            type: string
            example: ''
          film_kbn_joueihousiki:
            type: string
            example: ''
          film_kbn_jimakufukikae:
            type: string
            example: ''
          film_copyright:
            type: string
            example: ''
  Transaction:
    type: object
    properties:
      type:
        type: string
        example: transactions
      id:
        type: string
        example: ''
      attributes:
        type: object
        properties:
          status:
            type: string
            example: ''
          owners:
            type: object
            properties:
              id:
                type: string
                example: ''
              group:
                type: string
                example: ''
          expires_at:
            type: string
            format: date-time
            example: ''
          started_at:
            type: string
            format: date-time
            example: ''
  TransactionInquiryKey:
    type: object
    properties:
      inquiry_theater:
        description: 劇場コード
        type: string
        example: ''
      inquiry_id:
        description: 予約番号
        type: string
        example: ''
      inquiry_pass:
        description: 電話番号
        type: string
        example: ''
  Performance:
    type: object
    required:
      - name
      - photoUrls
    properties:
      id:
        type: string
      name:
        type: string
        example: doggie
      photoUrls:
        type: array
        xml:
          name: photoUrl
          wrapped: true
        items:
          type: string
responses:
  OK:
    description: ok
    schema:
      type: object
      properties:
        data:
          type: object
  NoContent:
    description: レスポンスなし
  NotFound:
    description: 見つかりませんでした
    schema:
      type: object
      properties:
        data:
          type: object
  BadRequest:
    description: 不適切なリクエスト
    schema:
      type: object
      properties:
        errors:
          type: array
          items:
            type: object
            properties:
              title:
                type: string
              detail:
                type: string
              source:
                type: object
                properties:
                  parameter:
                    type: string
